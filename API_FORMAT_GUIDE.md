# API返回格式说明

## 📋 期望的JSON格式

后端API应该返回以下标准JSON格式：

```json
{
  "papers": [
    {
      "title": "论文标题",
      "authors": "作者1, 作者2, 作者3",
      "abstract": "论文摘要（150-200字）",
      "year": 2024,
      "venue": "会议或期刊名称",
      "tags": ["标签1", "标签2", "标签3"]
    }
  ]
}
```

## 🔍 字段说明

### 必需字段
- **title** (string): 论文标题，中文或英文
- **authors** (string): 作者列表，用逗号分隔
- **abstract** (string): 论文摘要，150-200字左右

### 可选字段
- **year** (number): 发表年份
- **venue** (string): 发表的会议或期刊名称
- **tags** (array): 论文相关标签

## 📝 完整示例

### 示例1：机器学习在医疗诊断中的应用

```json
{
  "papers": [
    {
      "title": "基于深度学习的医学影像诊断系统研究",
      "authors": "张伟, 李娜, 王强",
      "abstract": "本文提出了一种基于深度卷积神经网络的医学影像自动诊断系统。该系统在多个医学影像数据集上进行了验证，包括X光片、CT扫描和MRI图像。实验结果表明，我们的方法在肺结节检测任务上达到了95.3%的准确率，在脑肿瘤分类任务上达到了92.7%的准确率，显著优于传统方法。",
      "year": 2024,
      "venue": "Medical Image Analysis",
      "tags": ["深度学习", "医疗诊断", "计算机视觉"]
    },
    {
      "title": "迁移学习在小样本医疗数据中的应用",
      "authors": "陈明, 刘洋, 赵静",
      "abstract": "针对医疗领域标注数据稀缺的问题，本研究探索了迁移学习技术在小样本医疗数据分析中的应用。通过在ImageNet上预训练的模型进行微调，我们在仅使用500个样本的情况下，在罕见疾病诊断任务上取得了89.2%的F1分数。",
      "year": 2023,
      "venue": "IEEE JBHI",
      "tags": ["迁移学习", "小样本学习", "医疗AI"]
    },
    {
      "title": "可解释性AI在临床决策支持系统中的应用",
      "authors": "吴敏, 周杰, 孙丽",
      "abstract": "本文提出了一个可解释的深度学习框架用于临床决策支持。通过注意力机制和梯度加权类激活映射，系统能够生成可视化的解释，帮助医生理解AI的诊断依据。在三家医院的临床试验中，该系统获得了医生的高度认可。",
      "year": 2024,
      "venue": "Nature Medicine",
      "tags": ["可解释AI", "临床决策", "医疗系统"]
    },
    {
      "title": "多模态融合网络在疾病预测中的研究",
      "authors": "黄涛, 郑芳, 马超",
      "abstract": "本研究设计了一个多模态深度学习架构，融合电子病历文本、医学影像和基因组数据进行疾病风险预测。实验表明，多模态融合比单一模态方法提升了12.5%的预测准确率，为精准医疗提供了新的技术路径。",
      "year": 2024,
      "venue": "ICML 2024",
      "tags": ["多模态学习", "疾病预测", "精准医疗"]
    },
    {
      "title": "联邦学习框架下的隐私保护医疗数据分析",
      "authors": "林峰, 胡萍, 谢亮",
      "abstract": "考虑到医疗数据的隐私敏感性，本文提出了基于联邦学习的分布式医疗AI模型训练框架。该方法允许多个医疗机构在不共享原始数据的情况下协作训练模型，在保护患者隐私的同时提升了模型性能，准确率提升了8.7%。",
      "year": 2023,
      "venue": "ACL 2023",
      "tags": ["联邦学习", "隐私保护", "医疗数据"]
    }
  ]
}
```

## 🎯 Few-Shot Prompt模板

我们在 `backend.py` 中已经实现了Few-shot提示词，引导API返回标准格式。

核心策略：
1. **明确格式要求**：在prompt中清晰说明JSON结构
2. **提供示例**：给出1-2个完整的示例论文
3. **强调约束**：要求"只返回JSON格式，不要其他文字"

## 🔄 支持的API响应格式

前端代码会自动解析以下几种格式：

### 格式1: 标准格式（推荐）
```json
{
  "papers": [...]
}
```

### 格式2: OpenAI格式
```json
{
  "choices": [{
    "message": {
      "content": "{\"papers\": [...]}"
    }
  }]
}
```

### 格式3: 带Markdown代码块
```json
{
  "choices": [{
    "message": {
      "content": "```json\n{\"papers\": [...]}\n```"
    }
  }]
}
```

## 🛠️ 测试

你可以在浏览器控制台查看详细的解析日志：
- 🔍 发送的请求
- 📡 收到的原始响应
- 🔧 解析过程
- ✅ 最终的论文数据

## 💡 调试技巧

1. **查看后端日志**：后端会打印原始API响应
2. **查看前端控制台**：详细的解析步骤
3. **检查网络请求**：浏览器开发者工具的Network标签

如果API返回的格式不符合预期，系统会自动使用模拟数据，让你可以继续体验功能。


